# flatten.ys

# 1. 讀入 Verilog 檔案，檔名由外部變數 $infile 指定
read_verilog -sv trojan1.v

# 2. 驗證階層並指定頂層模組，由外部變數 $top 指定
hierarchy -check -top Trojan1

# 3. 展開 procedural blocks
proc

# 4. 扁平化所有 module
flatten

# 5. 清除未使用的 wire/reg
opt_clean

# 6. 輸出扁平後的單層 netlist，檔名由外部變數 $outfile 指定
write_verilog -noattr flattened_trojan1.v
